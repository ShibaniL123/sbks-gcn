METHODS, IMPLANTABLE MEDICAL DEVICES, AND SYSTEMS THAT ABORT A HIGH VOLTAGE CHARGE WHEN A TRANSFORMER IS IMPAIRED TECHNICAL FIELD [0001] Embodiments relate to implantable medical devices that provide therapy that utilizes a high voltage charge. More particularly, embodiments relate to implantable medical devices that abort high voltage charges when a transformer used to create those charges becomes impaired and provides an impedance that is too low. BACKGROUND [0002] Implantable medical devices that provide therapy for conditions such as tachycardia and/or cardiac fibrillation must create a high voltage charge within a storage element such as a bank of capacitors. The capacitors then provide the energy for the tachycardia or defibrillation therapy. To create the high voltage charge, a battery is switched to produce pulses that are provided to a transformer that steps up the voltage. [0003] The implantable medical device may encounter ambient conditions that can impair the transformer by saturating the transformer core. A magnetic resonance imaging (MRI) scan is one example of a situation where the ambient conditions include a large static magnetic field that may saturate the transformer core. While devices may deactivate sensing and therapy by entering a special mode designed for MRI scans, there may still be a risk that the device inadvertently exits the special mode prematurely during the MRI scan due to a device reset caused by the strong fields of the MRI machine or due to some other unforeseen reason. Alternatively, there may be a risk that the device is inadvertently not programmed into the special mode designed for MRI scans prior to the patient receiving the scan. [0004] When the strong magnetic field of the MRI machine or other ambient condition saturates the core of the transformer, the inductance of the primary coil is drastically reduced. The primary coil then presents a very low impedance to the battery which causes the current from the battery to increase and the voltage to decrease. This spike in current may damage components of the implantable medical device including the battery. SUMMARY [0005] Embodiments of this disclosure address issues such as these and others by providing an implantable medical device that aborts the high voltage charge by comparing an obtained value indicative of the state of the device during the charging against a dynamic threshold. The implantable medical device obtains a value related to the battery when the battery is substantially unloaded, e.g., measuring an open circuit voltage of the battery. The dynamic threshold value may then be calculated based on a threshold impedance value for the primary coil, a value representing the resistance of the battery, and the obtained value related to the battery in the substantially unloaded state. During the high voltage charging, the value related to the battery is obtained, e.g., the loaded voltage of the battery, and is compared to the threshold value to determine whether to abort the high voltage charge due to an impaired transformer. The values related to the battery may be single measurements or may be derived from several measurements such as average values. For instance, when a threshold voltage is being used, the high voltage charge is aborted when the loaded voltage drops below the threshold voltage. [0006] Embodiments provide a method of aborting a high voltage charge of a capacitor within an implantable medical device when a transformer of the implantable medical device that produces the high voltage charge is impaired. The method involves obtaining a substantially unloaded value for a battery of the implantable medical device that provides voltage across a primary coil of the transformer. The method further involves computing a dynamic threshold value based on the substantially unloaded value, a value representing a resistance of the battery, and a value representing a threshold impedance of the primary coil and obtaining a loaded value of the battery when performing a high voltage charge. The method also involves comparing the loaded value to the threshold value, and when the difference between the loaded value and the threshold value indicates that the transformer is impaired, then aborting the high voltage charge. [0007] Embodiments provide a method of aborting a high voltage charge of a capacitor within an implantable medical device when a transformer of the implantable medical device that produces the high voltage charge is impaired. The method involves obtaining an open circuit voltage of a battery of the implantable medical device that provides voltage across a primary coil of the transformer and computing a dynamic threshold voltage based on the open circuit voltage, a value representing a resistance of the battery, and a value representing a threshold impedance of the primary coil. The method further involves obtaining a loaded voltage across the primary coil of the transformer when performing a high voltage charge and comparing the loaded voltage to the threshold voltage. When the loaded voltage drops below the threshold voltage then the high voltage charge is aborted. [0008] Embodiments provide an implantable medical device that includes a battery, a transformer having a primary coil and a secondary coil, an electrical storage element connected across the secondary coil, a switch in series between the battery and the primary coil, and a voltage measurement device that is electrically connected across the battery and that is electrically connected across the primary coil when the switch is closed. The implantable medical device further includes a controller in communication with the voltage measurement device and with the switch, the controller causing the switch to open and close to begin passing current from the battery through the primary coil during a high voltage charge of the electrical storage element. Prior to the high voltage charge the controller communicates with the voltage measurement device to obtain an open circuit voltage of the battery and during the high voltage charge the controller communicates with the voltage measurement device to obtain a loaded voltage of the battery. The controller computes a dynamic threshold voltage based on the open circuit voltage, a value representing a resistance of the battery, and a value representing a threshold impedance of the primary coil. The controller compares the loaded voltage to the threshold voltage, and when the loaded voltage drops below the threshold voltage the controller then aborts the high voltage charge by leaving the switch open. [0009] Embodiments provide an implantable medical system that includes an implantable medical lead and an implantable medical device. The implantable medical device that includes a battery, a transformer having a primary coil and a secondary coil, an electrical storage element connected across the secondary coil, a switch in series between the battery and the primary coil, and a voltage measurement device that is electrically connected across the battery and that is electrically connected across the primary coil when the switch is closed. The implantable medical device further includes a controller in communication with the voltage measurement device and with the switch, the controller causing the switch to open and close to begin passing current from the battery through the primary coil during a high voltage charge of the electrical storage element. Prior to the high voltage charge the controller communicates with the voltage measurement device to obtain an open circuit voltage of the battery and during the high voltage charge the controller communicates with the voltage measurement device to obtain a loaded voltage of the battery. The controller computes a dynamic threshold voltage based on the open circuit voltage, a value representing a resistance of the battery, and a value representing a threshold impedance of the primary coil. The controller compares the loaded voltage to the threshold voltage, and when the loaded voltage drops below the threshold voltage the controller then aborts the high voltage charge by leaving the switch open. When the high voltage charge is complete, the controller causes the energy storage element to be electrically coupled to the lead. [0010] This summary is intended to provide an overview of the subject matter described in this disclosure. It is not intended to provide an exclusive or exhaustive explanation of the techniques as described in detail within the accompanying drawings and description below. Further details of one or more examples are set forth in the accompanying drawings and the description below. Other features, objects, and advantages will be apparent from the description and drawings, and from the statements provided below. DESRIPTION OF THE DRAWINGS [0011] FIG. 1 shows an implantable medical system that includes an implantable medical device having one or more implantable medical leads. [0012] FIG. 2 shows an example of circuitry of the implantable medical device to provide a high voltage charge. [0013] FIG. 3 shows a simplified version of the circuitry for purposes of calculating a threshold value used to abort the high voltage charge. [0014] FIG. 4 shows an example of logical operations performed by the implantable medical device to determine whether to abort the high voltage charge. [0015] FIG. 5 shows a graph demonstration the selection of a threshold impedance for calculating the threshold value. DETAILED DESCRIPTION [0016] Embodiments provide implantable medical devices, systems and methods that abort high voltage charges when a primary coil of a transformer used to provide the high voltage charge becomes impaired and provides an impedance that is too low. A dynamic threshold value is computed based on battery characteristics determined while the battery is substantially unloaded, examples including the unloaded voltage level as well as internal resistance. This dynamic threshold value is then compared to a value measured during the high voltage charge to determine whether the primary coil has become impaired and is providing the impedance that is too low. [0017] FIG. 1 shows an example of an implantable medical system 100 that detects whether to abort a high voltage charge. The high voltage charge may be needed to provide a particular form of high voltage therapy, such as cardioversion and/or defibrillation. The system 100 includes an implantable medical device 102 that includes a high- voltage therapy function. The implantable medical device 102 includes circuitry 108 that provides the high- voltage therapy function including sensing for tachycardia and/or fibrillation and responding, in some instances, with a high- voltage therapy. The circuitry 108 is electrically coupled via electrical connectors 112 to proximal electrical contacts 110 of one or more leads 104 having distal electrodes 106. At least one of the leads 104 is positioned where an electrode 106 can sense the tachycardia and/or fibrillation while at least one of the leads 104 is positioned where an electrode 106 can deliver the high voltage therapy. The same lead 104 may be used to sense the tachycardia and/or fibrillation and deliver the high voltage therapy. In some instances, the system may include a single lead 104 implanted within a ventricle of the heart. In other instances, the system may include more than two leads 104. While the leads 104 are shown as examples that include two electrodes, it will be appreciated that leads with any number of electrodes may be used. [0018] FIG. 2 shows an example of the circuitry 108 that provides the high voltage charge and the corresponding high voltage therapy. As described above, however, circuitry 108 may include other components in addition to those illustrated in FIG. 2, including transmitters, receivers, sensors, sensing circuitry, therapy circuitry and other appropriate components. The circuitry 108 includes a controller 202 that performs logical operations to control various other components. The controller 202 may be of various forms including a general purpose programmable processor, a dedicated purpose processor, hardwired digital logic, and the like. The circuitry 108 may also include a memory having computer-readable instructions that, when executed by controller 202 or other component of circuitry 108, cause controller 202 to perform various functions attributed to it in this disclosure. The memory may include any volatile, non-volatile, magnetic, optical, or electrical media, such as a random access memory (RAM), read-only memory (ROM), non-volatile RAM (NVRAM), static nonvolatile RAM (SRAM), electrically-erasable programmable ROM (EEPROM), flash memory, or any other non-transitory computer-readable storage media. [0019] The circuitry 108 also includes a battery 204 that provides a direct current (DC) voltage. The battery 204 is represented in schematic form as a voltage source 206 in series with an internal resistance 208. The voltage source 206 may be of various types including lithium ion, lithium polymer, and so forth. The voltage output by the voltage source 206 is relatively steady state but may decrease as the amount of charge within the voltage source 206 becomes depleted over time. Additionally, factors such as the degree of depletion and age may affect the amount of internal resistance 208 that is present. Each of these factors contributes to the output voltage of the battery 204 when presented with a particular impedance. [0020] The battery 204 may be connected in parallel with a capacitor 210 to assist and stabilize the voltage being provided to the primary coil during instances of high current draw while being connected in series with a switch 212. Switch 212 may, in some instance, be implemented in silicon. The switch 212 provides a connection to the primary coil 214 of the transformer 216. The controller 202 operates the switch 212 to provide an open state and a closed state. During a high voltage charge, the controller 202 cycles the states of the switch 212 to create a train of pulses that may be transformed and also to attempt to present the battery 204 with a target impedance which may be a range of appropriate impedances. A given battery 204 may have a specified target impedance value or range of values from the manufacturer. [0021] The transformer 216 transforms the pulses to a higher voltage that is output from the secondary coil 218 of the transformer 216. A storage element 220 that may include various individual storage elements such as individual capacitors, receives and stores the high voltage charge. The controller 202 may monitor the high voltage charge stored in storage element 220 and then upon reaching an adequate level, and possibly reconfirming the need for the high voltage therapy, release the charge via a therapy circuit that can provide a high voltage therapy of a defined pulse shape, peak, width, and so forth via the electrode 106 of the lead 104. [0022] The controller 202 may communicate with a measurement device 224, such as an analog to digital converter, to obtain a measurement of the voltage output of the battery 204. Because the measurement device 224 is connected between the battery 204 and the switch 212, the measurement device 224 can obtain the voltage of the battery 204 regardless of whether the switch 212 is open or closed. Therefore, the measurement device 224 can provide both an open circuit measurement and a loaded measurement of the battery 204 to the controller 202. As discussed below with reference to FIGS. 3 and 4, the controller 204 can utilize both the open circuit voltage, or other substantially unloaded voltage of the battery, to compute a voltage threshold based on a current condition of the battery and then determine if the transformer 216 is impaired based on the voltage threshold compared to the loaded voltage obtained during the charge. Thus, the threshold for determining whether to abort the high voltage charge is computed dynamically to account for the present condition of the battery which reduces the likelihood of falsely aborting charges due to battery condition rather than transformer impairment. [0023] FIG. 3 shows a simplified circuit 300 for purposes illustrating the computation of the dynamic threshold voltage. Here, the transformer 216 and the load presented by those elements connected to the secondary coil of the transformer 216 are represented as a load impedance 302. Accordingly, the threshold voltage (Vt) can be computed as the voltage across the load impedance 302 as a function of the open circuit voltage (Voc) of the battery 204, or substantially unloaded voltage, the expected resistance of the battery (Rbatt) which is either a fixed value or may be determined by a look-up from the depletion of the battery as determined by measuring Voc, and a threshold impedance value (Zth) set for the load impedance 302 for purposes of the computation. A coefficient (CI) may be used to scale the value where CI may equal one but may be less than one to further reduce the possibility of false aborts. This is shown as Equation 1 : [0024] The drop in impedance of the primary coil of the transformer 216 is the ultimate cause for concern, and therefore the specified threshold impedance (Zth) is ultimately the least impedance that the primary coil may present to the battery in order for the measured loaded voltage (Vbatt) during the charge to be no less than the threshold voltage (Vt). An example of a procedure for selecting the value for the threshold impedance (Zth) is discussed in more detail below with reference to FIG. 5. [0025] This computation of the threshold voltage (Vt) utilizes the values that are known or measurable. Therefore, it is a convenient way to ultimately monitor the impedance being presented by the primary coil. Furthermore, this computation shown in Equation 1 utilizes the substantially unloaded voltage (Voc) of the battery 204 as measured such that where the measurement of Voc occurs within a relatively small amount of time from the calculation of Vt, for instance within 24 hours of measuring the loaded voltage (Vbatt), the calculation takes into account the current condition of the battery 204 which is reflected by the Voc measurement. Voc may also be computed based on multiple measurements of the substantially unloaded voltage, such as an average of measurements over the preceding week or some other recent period of time. Therefore, a condition of the battery 204 that may affect the Voc value does not falsely influence the decision to abort the high voltage charge which should be based on the impedance of the primary coil. Additionally, the Equation 1 utilizes the Rbatt value. Rbatt may be a fixed value as Voc already ensures the threshold (Vt) is based on the current condition of the battery which allows the threshold impedance (Zth) to be a chosen fixed value. However, Rbatt can be chosen to further refiect the degree of discharge of the battery 204 for batteries where Rbatt varies with the level of discharge so that the threshold voltage (Vt) is even more accurately modeled based on the present performance of the battery. [0026] FIG. 4 shows an example of a set of logical operations 400 that the controller 202 may implement to detect whether the transformer 216 has become impaired and to abort the high voltage charge when that is the case. The context for the operations 400 of FIG. 4 assumes that physiological monitoring and high voltage therapy is currently an active function for the implantable medical device 102. Thus, these operations 400 are not attempting to determine whether the monitoring and high voltage therapy is appropriate in a given circumstance. The implantable medical device 102 may perform other logical operations to determine whether a mode of operation that allows for physiological monitoring and high voltage therapy is appropriate. However, once high voltage therapy is deemed appropriate, the logical operations 400 of FIG. 4 may be implemented to avoid any consequences from continuing a high voltage charge while the transformer 216 is impaired by aborting the high voltage charge. [0027] The logical operations 400 begin at an operation 402 where a measurement is made of the substantially unloaded voltage, such as the open circuit voltage (Voc) of the battery 204. The goal of operation 402 is to obtain the voltage of the battery 402 when there is little to no current being drawn other than the current necessary for the measurement itself such that current draw is not lowering the measured voltage. This measurement may happen at one or more set times during a day. As discussed above, this value may also be based on multiple measurements of the substantially unloaded voltage such as by taking an average of measurements made over a preceding period of time, e.g., over the preceding week. [0028] At this point, the threshold voltage (Vt) may be calculated at an operation 406 using the available value for Rbatt, the known value for Zth, and the measured value for Voc using Equation 1. As an alternative, Vt may be calculated after other operations have occurred. [0029] At a query operation 404, the controller 202 attempts to sense a condition such as tachycardia and/or fibrillation via an electrode 106 on a lead 104. This repeats until tachycardia and/or fibrillation is detected, and then the controller 202 begins opening and closing the switch 212 to modulate the current from the battery 204 in an attempt to present the target impedance to the battery 204, based on a normal primary coil impedance, while sending pulses to the transformer 216 at an operation 408. The duty cycle of the switch 212 may be fixed to attempt to present a fixed target impedance, for instance operating at a frequency of 55 kHz to present a 0.65 ohm load. The control of the switch 212 may also rely on monitoring of the current present in the secondary coil such that the switch 212 is returned to the closed state once current in the secondary coil has declined to approximately zero. During this charge, the controller then obtains the loaded voltage (Vbatt) from the measurement device 224 at an operation 410. This loaded voltage (Vbatt) may be a single measurement or may instead be a value based on multiple measurements, such as an average of measurements taken over a period of time. For example, the loaded voltage (Vbatt) measurements may occur at a frequency well below that of the switch, e.g., 256 Hz. If the threshold voltage (Vt) has yet to be computed, then it can be computed via the operation 406 by this point. [0030] The controller 202 has all the information necessary to determine whether to abort the charge. At an operation 412, the controller 202 compares the value (Vbatt) measured while the battery 204 is loaded to the computed threshold value (Vt) to determine the difference between the two because this difference will indicate if the transformer is impaired and hence whether to abort the high voltage charge. At a query operation 414, when the measured value (Vbatt) is greater than or equal to the threshold value (Vt) then the transformer 216 is considered to be unimpaired so that the battery 204 is operating within an acceptable condition. In that case, the controller 202 decides whether the charge is complete at the query operation 416 by monitoring the voltage of the storage element 220. If the charge is not complete, then the controller 202 obtains another measurement or set of measurements of the battery 204 under load during the charge at the operation 410. If the charge is complete, then the controller 202 ends the charge process by leaving the switch 212 open and then, if still desired, initiating high voltage therapy such as defibrillation by the therapy circuit 222 at operation 418. [0031] Returning to query operation 414, if it is found that the loaded value (Vbatt) is less than the threshold value (Vt), then this indicates that the transformer 216 is impaired as the battery is operating outside of an acceptable condition. The controller 202 then aborts the charge at an operation 420 by maintaining the switch 212 in the open state. While in some examples a single instance of Vbatt being less than Vt results in aborting the charge, in other examples the charge may instead be aborted once Vbatt is found to be less than Vt a certain number of times within a predefined period of time. This ensures that the Vbatt is consistently below the threshold (Vt) before aborting the charge to further avoid falsely aborting the charge. Additionally, the number of times the charge has been aborted may be tracked so that after the charge has been aborted a certain number of times, e.g., 3, which may indicate a permanent impairment of the primary coil of the transformer, the high- voltage charge may be permanently disabled. [0032] While the determination has been discussed in relation to measuring a voltage and computing a voltage threshold, other electrical values may alternatively be used. For instance, where measurement of the electrical current is available via an electrical current measurement, the determination may be based on calculating a current value representative of the battery in a substantially unloaded state such as where a very high resistance is applied to capture the current measurement. Likewise, current may be measured during the charge process via the current measurement device. A threshold value (It) of current may be computed based on the same values of Voc, Rbatt, and Zth according to Equation 2: It=Voc/(Rbatt+Zth) [0033] The value specified for the threshold impedance (Zth) allows the controller 202 to discriminate between a measured loaded voltage (Vbatt) that is lower than the substantially unloaded voltage (Voc) due to a level of depletion of the battery 204 and the measured loaded voltage (Vbatt) being lower voltage due to an impaired transformer 216. Being able to discriminate between these two circumstances allows the controller 202 to avoid aborting due to the depletion level of the battery while still aborting when the transformer 216 actually is impaired. [0034] The threshold impedance (Zth) may be set to the lowest value that is still considered to be higher than a real load impedance 302 presented by an impaired transformer 216. Such a threshold impedance (Zth) in turn results in a threshold voltage (Vt) that effectively distinguishes a low loaded voltage (Vbatt) indicative of an impaired transformer 216 from a relatively low loaded voltage (Vbatt) that is merely from a depletion level of the battery or from closely spaced repeated charge cycles which also causes a low loaded battery voltage. [0035] FIG. 5 shows a collection 500 of plots of loaded voltage over a complete range of depletion levels for a collection of batteries of a particular type where the target impedance is specified by the manufacturer as 0.6 ohms. As can be seen, when the batteries of this particular type are loaded at 0.6 ohms over the full depletion range, the least voltage being output occurs on the verge of complete depletion. The mean loaded voltage is about 1.6V while the 0.01 percentile loaded voltage is about 1.4V. As can also be seen, when the batteries of this particular type are loaded at 0.25 ohms, which is a candidate for the impedance threshold, over the full depletion range, the loaded voltage for the 99.99 percentile is less at every depth of discharge than the loaded voltage for the 0.01 percentile of the battery loaded at 0.6 ohms. Therefore, when accounting for the depth of discharge when determining the threshold voltage (Vt) by utilizing Voc, 0.25ohm serves as an impedance threshold that will properly discriminate between a depletion level causing a relatively low voltage or an impaired transformer 216 causing the relatively low voltage. [0036] Therefore, the value representing the threshold impedance of the primary coil may be chosen by determining a highest impedance that is less than the target impedance being presented to the battery when the transformer is unimpaired. This highest impedance being used as the threshold impedance can be found where a distribution of voltages representative of the battery 204 for any depth of discharge of the battery 204 when loaded at that highest impedance does not overlap with a distribution of voltages representative of the battery for any depth of discharge of the battery when loaded at the target impedance that is presented to the battery during the high voltage defibrillation charge when the primary coil is unimpaired. [0037] While embodiments have been particularly shown and described, it will be understood by those skilled in the art that various other changes in the form and details may be made therein without departing from the spirit and scope of the invention. 1. An implantable medical device comprising: a battery; a transformer having a primary coil and a secondary coil; an electrical storage element connected across the secondary coil of the transformer; a switch in series between the battery and the primary coil of the transformer; a voltage measurement device that is electrically connected across the battery and that is electrically connected across the primary coil when the switch is closed; and a controller in communication with the voltage measurement device and with the switch, the controller causing the switch to open and close to begin passing current from the battery through the primary coil during a high voltage charge of the electrical storage element, wherein prior to the high voltage charge the controller communicates with the voltage measurement device to obtain an open circuit voltage of the battery and during the high voltage charge the controller communicates with the voltage measurement device to obtain a loaded voltage of the battery, wherein the controller computes a threshold voltage based on the open circuit voltage, a value representing a resistance of the battery, and a value representing a threshold impedance of the primary coil, and wherein the controller compares the loaded voltage to the threshold voltage, and when the loaded voltage drops below the threshold voltage then aborts the high voltage charge by leaving the switch open. 2. The implantable medical device of claim 1, wherein the controller obtains the open circuit voltage of the battery within 24 hours of obtaining the voltage across the primary coil of the transformer when performing a high voltage charge. 3. The implantable medical device of any one of claims 1 or 2, wherein the value representing the resistance of the battery is fixed. 4. The implantable medical device of any one of claims 1-3, wherein the controller chooses the value representing the resistance of the battery based on a depth of discharge of the battery. 5. The implantable medical device of any one of claims 1-4, wherein the value representing the threshold impedance of the primary coil is chosen by determining a highest impedance less than a target impedance being presented to the battery when the primary coil is unimpaired where a distribution of voltages representative of the battery for any depth of discharge of the battery when loaded at that highest impedance does not overlap with a distribution of voltages representative of the battery for any depth of discharge of the battery when loaded at the target impedance that is presented to the battery during the high voltage charge when the primary coil is unimpaired. 6. The implantable medical device of any one of claims 1-5, wherein the controller performs the high voltage charge by repeatedly opening and closing the switch where the timing of the repeated opening and closing of the switch modulates the current through the primary coil to attempt to present the battery with a target impedance that is most accurately achieved when the transformer is unimpaired. 7. The implantable medical device of any one of claims 1-6, wherein the controller obtains the open circuit voltage by the measurement device making a direct measurement of the open circuit voltage and wherein the controller obtains the loaded voltage by the measurement device making a direct measurement of the loaded voltage. 8. A method of aborting a high voltage charge of a capacitor within an implantable medical device when a transformer of the implantable medical device that produces the high voltage charge is impaired, comprising: obtaining an open circuit voltage of a battery of the implantable medical device that provides voltage across a primary coil of the transformer; computing a dynamic threshold voltage based on the open circuit voltage, a value representing a resistance of the battery, and a value representing a threshold impedance of the primary coil; obtaining a loaded voltage across the primary coil of the transformer when performing a high voltage charge; and comparing the loaded voltage to the threshold voltage, and when the loaded voltage drops below the threshold voltage then aborting the high voltage charge.